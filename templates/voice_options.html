
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Voice Selection</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <style>
        body { background: #121212; color: #fff; padding: 30px; }
        .voice-dropdown { width: 100%; max-width: 400px; }
        .select2-container--default .select2-selection--single {
            background: #222; color: #fff; border: 1px solid #444;
            padding: 10px; font-size: 16px; border-radius: 8px;
        }
        .select2-dropdown { background: #222; color: #fff; border: 1px solid #444; }
        .select2-results__option { padding: 12px; font-size: 16px; display: flex; align-items: center; justify-content: space-between; }
        .select2-results__option:hover { background: #444; }
        .flag-icon { width: 24px; height: 16px; margin-right: 8px; }
        .play-btn, .download-btn { cursor: pointer; font-size: 18px; color: #0f9d58; margin-left: 8px; }
        .play-btn:hover { color: #1dcf73; }
        .download-btn:hover { color: #ff9800; }
    </style>
</head>
<body>

    <h2>üîä Select a Voice</h2>
    <select class="voice-dropdown" id="voiceSelect">
        <optgroup label="English">
            <option value="en-US-AriaNeural">üá∫üá∏ English (US) - Aria</option>
            <option value="en-GB-SoniaNeural">üá¨üáß English (UK) - Sonia</option>
        </optgroup>
        <optgroup label="Hindi">
            <option value="hi-IN-SwaraNeural">üáÆüá≥ Hindi - Swara</option>
            <option value="hi-IN-MadhurNeural">üáÆüá≥ Hindi - Madhur</option>
        </optgroup>
        <optgroup label="French">
            <option value="fr-FR-DeniseNeural">üá´üá∑ French - Denise</option>
            <option value="fr-FR-HenriNeural">üá´üá∑ French - Henri</option>
        </optgroup>
    </select>

    <audio id="audioPlayer" controls style="display: none;"></audio>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#voiceSelect').select2({
                placeholder: "Choose a voice...",
                allowClear: true,
                templateResult: formatVoiceOption,
                templateSelection: formatVoiceSelection
            });

            function formatVoiceOption(option) {
                if (!option.id) { return option.text; }
                let flag = option.text.split(" ")[0]; // Extract flag emoji
                let text = option.text.replace(flag, "").trim();
                return $(`<span>${flag} ${text} 
                    <span class="play-btn" data-voice="${option.id}" title="Play">‚ñ∂Ô∏è</span>
                    <span class="download-btn" data-voice="${option.id}" title="Download">‚¨áÔ∏è</span>
                </span>`);
            }

            function formatVoiceSelection(option) {
                if (!option.id) { return option.text; }
                let flag = option.text.split(" ")[0];
                return $(`<span>${flag} ${option.text.replace(flag, "").trim()}</span>`);
            }

            $(document).on("click", ".play-btn", function() {
                let voiceID = $(this).data("voice");
                let audioSrc = `https://example.com/voices/${voiceID}.mp3`; // üî• Replace with actual API URL
                $("#audioPlayer").attr("src", audioSrc).get(0).play();
            });

            $(document).on("click", ".download-btn", function() {
                let voiceID = $(this).data("voice");
                let downloadURL = `https://example.com/voices/${voiceID}.mp3`; // üî• Replace with actual API URL
                let a = document.createElement('a');
                a.href = downloadURL;
                a.download = voiceID + ".mp3";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
        });
    </script>

</body>
</html>